#hay que instalar docker
#se lanza el siguiente comando y se crea la red net4
docker network create net4

#se lanza el siguiente comando y se cdespliega la maquina de base de datos con MYSQL
docker run -d --name mysqlwpres01 -p 9000:3306 -e MYSQL_ROOT_PASSWORD=carlosp -e MYSQL_USER=carlosu -e MYSQL_PASSWORD=carlosp -e MYSQL_DATABASE=lumina --network net4 mysql

# -d 		crea el contenedor y queda corriendo en background
# --name	crea el contenedor con el nombre mysqlwpres01
# -p 9000:3306  le asigna el puerto 9000 de la maquina fisica y la enlaza con el puerto 3306 del contenedor que es el puerto de mysql
# -e MYSQL_ROOT_PASSWORD=carlosp	le asigna el password de root a la BD
#    MYSQL_USER=carlosu 		crea el usuario nuevo para la DB    
#    MYSQL_PASSWORD=carlosp		crea el password del usuario carlosp de BD
#    MYSQL_DATABASE=lumina		se crea la BD con el nombre lumina
# --network	se asigna el contener para que corra sobre la net4 que creamos inicialmente
# mysql		es el nombre de la imagen sobre la que se crea el contenedor


#Se lanza el siguiente comando y se despliega el contenedor con wordpress 
docker run -d --name wp1 -p 9001:80 --network net4 --env-file wordpress.env wordpress

# --env-file	indica que al crear el contenedor se utiliza el archivo wordpress.env emn donde estan los parametros de configuracion del mismo
# wordpress	es el nombre de la imagen sobre la que se crea el contenedor


#archivo wordpress.env
# se crea el archivo wordpress.env y se le ingresan las siguientes lineas sibn el caracter # al inicio de la linea
#	WORDPRESS_DB_HOST=mysqlsw01
#	WORDPRESS_DB_USER=carlosu
#	WORDPRESS_DB_PASSWORD=carlosp
#	WORDPRESS_DB_NAME=lumina


#para desplegar jenkins se descarga la imagen del dockerhub con el siguiente comando
docker pull jenkins/jenkins

#se crea el contenedor con el siguiente comando
docker run -d --name jenkins -p 8080:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins

#se ejecuta el siguiente comando para copiar el password inicial de la maquina y se aplica en el navegador web  en  http://localhost:8080/
docker exec jenkins cat  /var/jenkins_home/secrets/initialAdminPassword

#ya se puede accesar al jenkins para realizar la configuracion final
